# Claude Code 実践ワーク

> **Anthropic x Forum Ventures ハッカソン優勝者の設定集を体験する**

このプロジェクトには [everything-claude-code](https://github.com/affaan-m/everything-claude-code) のベストプラクティスが組み込まれています。
5つのワークを通じて、その威力を体験しましょう。

---

## 概要：6つの設定カテゴリ

| カテゴリ | 場所 | 役割 |
|---------|------|------|
| **agents/** | `.claude/agents/` | 専門エージェントによるタスク委任 |
| **skills/** | `.claude/skills/` | 再利用可能なワークフロー定義 |
| **commands/** | `.claude/commands/` | `/tdd` などのスラッシュコマンド |
| **rules/** | `.claude/rules/` | 常に従うルール（セキュリティ、コーディング規約） |
| **hooks** | `.claude/settings.local.json` | イベントggg駆動の自動化 |
---

## Work 1: スラッシュコマンドを体験する

**目的**: `/plan` コマンドで実装計画を作成する

### やること

```
/plan カウンターコンポーネントにリセットボタンを追加したい
```

### 期待される動作

1. **planner エージェント**が自動で呼び出される
2. 実装計画が作成される：
   - 変更するファイル
   - 実装手順
   - 注意点・リスク
3. 計画の承認を求められる

### 確認ポイント

- [ ] 計画が step-by-step で示されたか
- [ ] 変更対象のファイルが特定されたか
- [ ] 実装に移る前に承認を求められたか

### なぜ重要？

`/plan` は **コードを書く前に考える** ことを強制します。
いきなり実装を始めるより、計画を立ててから進める方が手戻りが少なくなります。

---

## Work 2: TDD（テスト駆動開発）を体験する

**目的**: `/tdd` コマンドで RED → GREEN → REFACTOR サイクルを体験する

### やること

```
/tdd 数値を2倍にする関数 doubleNumber を作成したい
```

### 期待される動作

1. **tdd-guide エージェント**が呼び出される
2. **RED**: まずテストを書く（失敗することを確認）
3. **GREEN**: 最小限の実装でテストを通す
4. **REFACTOR**: コードを改善する

### 確認ポイント

- [ ] テストが**先に**書かれたか
- [ ] テストが最初は**失敗した**か（RED）
- [ ] 実装後にテストが**通った**か（GREEN）
- [ ] カバレッジ80%以上を目指す説明があったか

### なぜ重要？

TDD は **everything-claude-code の中心的なワークフロー**です。
テストを先に書くことで、バグの早期発見とリファクタリングの安全性を確保します。

---

## Work 3: コードレビューを体験する

**目的**: `/code-review` でコード品質をチェックする

### やること

まず、以下のような「問題のあるコード」を想定してレビューを依頼：

```
/code-review app/page.tsx をレビューして
```

または、Work 2 で作成したコードをレビュー：

```
/code-review 今作成したコードをレビューして
```

### 期待される動作

1. **code-reviewer エージェント**が呼び出される
2. 以下の観点でチェック：
   - ロジックエラー
   - エッジケース
   - セキュリティ（OWASP Top 10）
   - パフォーマンス
   - 可読性
3. 重要度順（CRITICAL > HIGH > MEDIUM > LOW）で報告

### 確認ポイント

- [ ] セキュリティの観点でチェックされたか
- [ ] 問題点が重要度順に並んでいるか
- [ ] 修正案も提示されたか

### なぜ重要？

`.claude/rules/security.md` で定義されたルールに従い、**コミット前の必須チェック**を自動化します。

---

## Work 4: Playwright MCP でブラウザを操作する

**目的**: MCP（外部サービス連携）の威力を体験する

### 前提条件

開発サーバーを起動しておく：
```bash
npm run dev
```

### やること

```
localhost:3000 を開いて、ページの要素を確認して、スクリーンショットを取って
```

### 期待される動作

1. **Playwright MCP** がブラウザを起動
2. `browser_snapshot` でページ要素を取得
3. `browser_take_screenshot` でスクリーンショット取得
4. 結果を報告

### 確認ポイント

- [ ] ブラウザが自動で起動したか
- [ ] ページの要素（ボタン、リンクなど）が一覧表示されたか
- [ ] スクリーンショットが取得できたか

### 発展：E2E テストを生成する

```
/e2e ホームページが正しく表示されることを確認するテストを作成して
```

### なぜ重要？

Playwright MCP により、**Claude がブラウザを直接操作**できます。
テスト生成、バグ再現、デバッグが大幅に効率化されます。

> ⚠️ **注意**: MCP を有効化しすぎるとコンテキストが 200k → 70k に縮小する可能性があります。10個以下に抑えましょう。

---

## Work 5: Context7 で最新ドキュメントを検索する

**目的**: AI の知識が古くても最新情報を取得できることを体験する

### やること

```
ethers.js v6 でコントラクトを呼び出す方法を、Context7 で調べて教えて
```

または：

```
Next.js の Server Actions の書き方を Context7 で調べて
```

### 期待される動作

1. **Context7 MCP** がライブラリを検索
2. `resolve-library-id` でライブラリ ID を取得
3. `query-docs` で最新ドキュメントを取得
4. 最新のコード例を含む回答を提供

### 確認ポイント

- [ ] ライブラリ ID が解決されたか（例: `/vercel/next.js`）
- [ ] 最新のドキュメントが取得されたか
- [ ] コード例が含まれていたか

### なぜ重要？

AI の学習データは古くなりがちですが、**Context7 で最新情報をリアルタイムに取得**できます。

---

## ボーナスワーク：エージェントを直接呼び出す

**目的**: 9つの専門エージェントの使い分けを体験する

### 利用可能なエージェント

| エージェント | 得意なこと |
|------------|-----------|
| `planner` | 実装計画の作成 |
| `architect` | システム設計・アーキテクチャ |
| `tdd-guide` | テスト駆動開発 |
| `code-reviewer` | コード品質レビュー |
| `security-reviewer` | セキュリティ脆弱性分析 |
| `build-error-resolver` | ビルドエラー解決 |
| `e2e-runner` | E2E テスト生成・実行 |
| `refactor-cleaner` | 不要コード削除 |
| `doc-updater` | ドキュメント更新 |

### やること

```
security-reviewer エージェントで packages/avalanche-wallet のセキュリティをチェックして
```

または：

```
architect エージェントでこのプロジェクトのアーキテクチャを説明して
```

### なぜ重要？

各エージェントは**必要最小限のツールだけ**を持っています。
50個のツールを持つ汎用エージェントより、5個に絞った専門エージェントの方が**高速で正確**です。

---

## 全体のまとめ

| Work | 学んだこと | 使った機能 |
|------|-----------|-----------|
| 1 | コードを書く前に計画を立てる | `/plan`, planner エージェント |
| 2 | テストを先に書く TDD | `/tdd`, tdd-guide エージェント |
| 3 | コミット前にレビューする | `/code-review`, rules |
| 4 | ブラウザを自動操作する | Playwright MCP |
| 5 | 最新ドキュメントを取得する | Context7 MCP |
| ボーナス | 専門エージェントを使い分ける | agents |

---

## コンテキストウィンドウの管理

> ⚠️ **最も重要な注意点**

MCP を有効化しすぎると、**コンテキストが 200k → 70k に縮小**します。

### 推奨設定

- 設定ファイルに 20〜30 個の MCP を記述
- プロジェクトごとに **10個以下** を有効化
- 有効なツールは **80個以下** に抑える

### 確認方法

```
/mcp
```

で現在有効な MCP サーバーを確認できます。

---

## 次のステップ

これらのワークを完了したら：

1. **自分のプロジェクトに適用**: `.claude/` ディレクトリをコピー
2. **カスタムルールを追加**: `.claude/rules/` にプロジェクト固有のルールを追加
3. **スキルを作成**: `/skill-create` でプロジェクトのパターンをスキル化
4. **フックをカスタマイズ**: `.claude/settings.local.json` でフックを調整

---

## 参考リンク

- [everything-claude-code リポジトリ](https://github.com/affaan-m/everything-claude-code)
- [The Shorthand Guide to Everything Claude Code（Xスレッド）](https://x.com/affaanmustafa/status/1748123456789123456)
- [Guide.md（詳細ガイド）](./Guide.md)
