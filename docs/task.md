# 10x10 2Dグリッドゲーム開発タスクリスト

## フェーズ 1: プロジェクトのセットアップと基盤

- [ ] Next.jsプロジェクトの依存関係をインストールする (`npm install`)
- [ ] 開発サーバーを起動し、既存のアプリが動作することを確認する (`npm run dev`)
- [ ] `app/page.tsx`に基本的な10x10のグリッド表示を実装する。CSS Gridを使用し、`react-css-grid-game-rendering`スキルを参考に、CSS変数でサイズを管理する。
- [ ] プレイヤーを表す要素をグリッド上に配置し、初期位置を設定する。
- [ ] ゲームボードとプレイヤーの基本的なスタイルを`app/globals.css`に定義する。

## フェーズ 2: ゲームロジックとUIの実装

- [ ] プレイヤーの現在位置を管理するReactの状態（state）を`app/page.tsx`に追加する。
- [ ] キーボードイベント（上下左右の矢印キー）をリッスンし、プレイヤーの位置を更新するロジックを実装する。
- [ ] プレイヤーがグリッドの範囲外に移動しないように境界チェックを追加する。
- [ ] プレイヤーの位置が更新されるたびに、グリッド上のプレイヤー要素の表示位置も更新されるようにする。

## フェーズ 3: ウォレット連携とコントラクト操作の準備

- [ ] `PositionTracker.sol`コントラクトのABIとアドレスを`.env.local`に設定する。既存の`.env.local.example`を参考に、環境変数を適切に設定する。
- [ ] `app/layout.tsx`にて`packages/avalanche-wallet/WalletProvider.tsx`が適切に設定されていることを確認し、アプリ全体をラップしていることを確認する。
- [ ] ウォレット接続用のUI（ボタンなど）を`app/page.tsx`に追加する。
- [ ] `packages/avalanche-wallet/useWallet.ts`フックを使用して、ウォレット接続機能（`connectWallet`）をUIに連携させる。
- [ ] ウォレットが接続されているかどうかに応じて、UIの表示を切り替える（例: 未接続時は接続ボタン表示、接続済み時はプレイヤー移動可能にする）。

## フェーズ 4: 永続化ロジックの実装

- [ ] プレイヤーが移動した際に、その新しい座標をFujiテストネット上の`PositionTracker`コントラクトに書き込むための関数を実装する。`useWallet`の`sendTransaction`を使用する。
- [ ] `PositionTracker.sol`のメソッド（`setPosition`など）を呼び出すためのトランザクションデータを正しく構築する。
- [ ] トランザクションのステータス（保留中、成功、失敗）をユーザーにフィードバックするUI要素を追加する。
- [ ] アプリケーションの初期ロード時に、コントラクトからプレイヤーの最新の位置を読み込む機能を実装する。`useWallet`の`callView`を使用する。

## フェーズ 5: テストと最終調整

- [ ] 開発サーバー上でアプリケーションを起動し、キーボード操作でプレイヤーが移動することを確認する。
- [ ] ウォレット接続、コントラクトへの座標書き込み、および読み込みが正しく機能することを確認する。
- [ ] トランザクションがFujiテストネットに正常に送信され、ブロックエクスプローラーで確認できることを検証する。
- [ ] UI/UXの改善（ロード状態の表示、エラーメッセージの表示など）を行う。
- [ ] コードのクリーンアップとコメントの追加。
